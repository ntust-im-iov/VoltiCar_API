{% extends "base.html" %}

{% block title %}儀表板 - Volticar 管理面板{% endblock %}

{% block content %}
<!-- 頁面標題 -->
<div class="page-header fade-in">
    <h1><i class="fas fa-tachometer-alt"></i> 系統儀表板</h1>
    <p class="mb-0">歡迎回來，{{ admin }}！以下是系統概況</p>
</div>

<!-- 統計卡片 -->
<div class="row g-4 mb-4">
    <div class="col-md-6 col-lg-4">
        <div class="card stats-card fade-in" style="background: linear-gradient(135deg, #3498db, #2980b9);">
            <div class="card-body text-white">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-2 opacity-75">用戶數量</h6>
                        <h2 class="mb-0">{{ stats.users_count }}</h2>
                    </div>
                    <div class="text-end">
                        <i class="fas fa-users fa-3x opacity-75"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="/admin/users" class="text-white text-decoration-none d-flex align-items-center">
                        查看詳情 <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-lg-4">
        <div class="card stats-card fade-in" style="background: linear-gradient(135deg, #27ae60, #229954);">
            <div class="card-body text-white">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-2 opacity-75">車輛定義</h6>
                        <h2 class="mb-0">{{ stats.vehicles_count }}</h2>
                    </div>
                    <div class="text-end">
                        <i class="fas fa-car fa-3x opacity-75"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="/admin/vehicles" class="text-white text-decoration-none d-flex align-items-center">
                        查看詳情 <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-lg-4">
        <div class="card stats-card fade-in" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
            <div class="card-body text-white">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-2 opacity-75">物品定義</h6>
                        <h2 class="mb-0">{{ stats.items_count }}</h2>
                    </div>
                    <div class="text-end">
                        <i class="fas fa-boxes fa-3x opacity-75"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="/admin/items" class="text-white text-decoration-none d-flex align-items-center">
                        查看詳情 <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-lg-4">
        <div class="card stats-card fade-in" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
            <div class="card-body text-white">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-2 opacity-75">任務定義</h6>
                        <h2 class="mb-0">{{ stats.tasks_count }}</h2>
                    </div>
                    <div class="text-end">
                        <i class="fas fa-tasks fa-3x opacity-75"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="/admin/tasks" class="text-white text-decoration-none d-flex align-items-center">
                        查看詳情 <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-lg-4">
        <div class="card stats-card fade-in" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
            <div class="card-body text-white">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-2 opacity-75">遊戲事件</h6>
                        <h2 class="mb-0">{{ stats.game_events_count }}</h2>
                    </div>
                    <div class="text-end">
                        <i class="fas fa-calendar-alt fa-3x opacity-75"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="/admin/game-events" class="text-white text-decoration-none d-flex align-items-center">
                        查看詳情 <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 col-lg-4">
        <div class="card stats-card fade-in" style="background: linear-gradient(135deg, #1abc9c, #16a085);">
            <div class="card-body text-white">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title mb-2 opacity-75">商店物品</h6>
                        <h2 class="mb-0">{{ stats.shop_items_count }}</h2>
                    </div>
                    <div class="text-end">
                        <i class="fas fa-shopping-cart fa-3x opacity-75"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="/admin/shop-items" class="text-white text-decoration-none d-flex align-items-center">
                        查看詳情 <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 快速操作和系統狀態 -->
<div class="row g-4">
    <div class="col-lg-8">
        <div class="card fade-in">
            <div class="card-header">
                <h5><i class="fas fa-plus-circle"></i> 快速新增</h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <a href="/admin/vehicles/add" class="btn btn-outline-primary w-100 d-flex align-items-center justify-content-center">
                            <i class="fas fa-car me-2"></i> 新增車輛定義
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="/admin/items/add" class="btn btn-outline-success w-100 d-flex align-items-center justify-content-center">
                            <i class="fas fa-box me-2"></i> 新增物品定義
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="/admin/tasks/add" class="btn btn-outline-warning w-100 d-flex align-items-center justify-content-center">
                            <i class="fas fa-tasks me-2"></i> 新增任務定義
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="/admin/destinations/add" class="btn btn-outline-danger w-100 d-flex align-items-center justify-content-center">
                            <i class="fas fa-map-marker-alt me-2"></i> 新增目的地
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="/admin/game-events/add" class="btn btn-outline-info w-100 d-flex align-items-center justify-content-center">
                            <i class="fas fa-calendar-alt me-2"></i> 新增遊戲事件
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="/admin/shop-items/add" class="btn btn-outline-dark w-100 d-flex align-items-center justify-content-center">
                            <i class="fas fa-shopping-cart me-2"></i> 新增商店物品
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card fade-in">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> 系統狀態</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <div class="d-flex justify-content-between">
                        <span>資料庫連線</span>
                        <span class="badge bg-success">正常</span>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="d-flex justify-content-between">
                        <span>目的地數量</span>
                        <span class="badge bg-info">{{ stats.destinations_count }}</span>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="d-flex justify-content-between">
                        <span>遊戲事件數量</span>
                        <span class="badge bg-purple">{{ stats.game_events_count }}</span>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="d-flex justify-content-between">
                        <span>商店物品數量</span>
                        <span class="badge bg-teal">{{ stats.shop_items_count }}</span>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="d-flex justify-content-between">
                        <span>系統版本</span>
                        <span class="badge bg-secondary">v1.0.0</span>
                    </div>
                </div>
                <div class="text-center">
                    <small class="text-muted">
                        <i class="fas fa-clock"></i> 
                        最後更新: <span id="current-time"></span>
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function updateCurrentTime() {
    const now = new Date();
    const timeString = now.getFullYear() + '-' + 
                      String(now.getMonth() + 1).padStart(2, '0') + '-' + 
                      String(now.getDate()).padStart(2, '0') + ' ' +
                      String(now.getHours()).padStart(2, '0') + ':' + 
                      String(now.getMinutes()).padStart(2, '0') + ':' + 
                      String(now.getSeconds()).padStart(2, '0');
    document.getElementById('current-time').textContent = timeString;
}

// 更新時間並每秒鐘刷新
updateCurrentTime();
setInterval(updateCurrentTime, 1000);
</script>
{% endblock %}
